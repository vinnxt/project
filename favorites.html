<!doctype html>
<html lang="id">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Favorit - Toko Online</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
    <header>
        <div class="container">
            <h1 class="logo">Toko Online</h1>
            <nav>
                <ul>
                    <li><a href="index.html">Kembali</a></li>
                    <li><a href="kami.html">Tentang Kami</a></li>
                    <li><a href="favorites.html" aria-current="page">Favorit</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <h2>Daftar Favorit</h2>
            <div id="favoritesList" class="product-grid">
                <!-- Favorit akan dirender di sini oleh JavaScript -->
            </div>
            <p id="noFav" style="display:none; text-align:center; margin-top:20px;">Anda belum menyimpan produk favorit.</p>
        </div>
    </main>

    <footer>
        <div class="container"><p>&copy; 2025 Toko Online</p></div>
    </footer>

    <script>
        (function(){
            function getFavorites(){
                try{ return JSON.parse(localStorage.getItem('favorites') || '[]'); }catch(e){ return []; }
            }
            const list = getFavorites();
            const container = document.getElementById('favoritesList');
            const noFav = document.getElementById('noFav');
            if(!container) return;
            if(list.length === 0){ noFav.style.display = 'block'; return; }
            list.forEach(item => {
                const div = document.createElement('div');
                div.className = 'product';
                div.innerHTML = `
                    <div class="prod-actions">
                        <button class="icon-btn cart-btn" title="Tambah ke keranjang"><i class="bi bi-cart-plus"></i></button>
                        <button class="icon-btn fav-btn favorited" title="Hapus dari favorit"><i class="bi bi-heart-fill"></i></button>
                    </div>
                    <img src="${item.img}" alt="${item.title}">
                    <h3>${item.title}</h3>
                    <p>Rp ${item.price}</p>
                    <a href="#"><button>Beli Sekarang</button></a>
                `;
                // remove favorite handler
                const favBtn = div.querySelector('.fav-btn');
                favBtn.addEventListener('click', function(){
                    let favs = getFavorites();
                    favs = favs.filter(i => i.id !== item.id);
                    localStorage.setItem('favorites', JSON.stringify(favs));
                    div.remove();
                    if(favs.length === 0) noFav.style.display = 'block';
                });
                container.appendChild(div);
            });
        })();
    </script>
</body>
</html>
